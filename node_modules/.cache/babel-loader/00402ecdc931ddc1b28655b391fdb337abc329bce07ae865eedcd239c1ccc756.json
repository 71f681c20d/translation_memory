{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/alexander/Desktop/translation_memory/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import Papa from\"papaparse\";import React,{useContext}from\"react\";import{translationMemoryContext}from\"../TranslationMemory\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DocumentUploader=function DocumentUploader(){var translationMemoryStore=useContext(translationMemoryContext);var setPhrases=translationMemoryStore===null||translationMemoryStore===void 0?void 0:translationMemoryStore.setPhrases;var changeHandler=function changeHandler(event){console.log(event.target.files[0]);parseCsv(event);};var parseCsv=function parseCsv(event){// Passing file data (event.target.files[0]) to parse using Papa.parse\nPapa.parse(event.target.files[0],{header:true,skipEmptyLines:true,complete:function complete(results){var allPhrases=results.data;var filteredPhrases=[];// filter allPhrases based on the 'included' field in the CSV; exclude if it says FALSE\nvar _iterator=_createForOfIteratorHelper(allPhrases),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var phrase=_step.value;if(phrase.included!=='FALSE'){filteredPhrases.push(phrase);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(filteredPhrases);setPhrases?setPhrases(filteredPhrases):console.error('Unable to initialize uploaded phrases');}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",accept:\".csv\",onChange:changeHandler,style:{display:\"block\",margin:\"10px auto\"}})})});};export default DocumentUploader;","map":{"version":3,"names":["Papa","React","useContext","translationMemoryContext","jsx","_jsx","Fragment","_Fragment","DocumentUploader","translationMemoryStore","setPhrases","changeHandler","event","console","log","target","files","parseCsv","parse","header","skipEmptyLines","complete","results","allPhrases","data","filteredPhrases","_iterator","_createForOfIteratorHelper","_step","s","n","done","phrase","value","included","push","err","e","f","error","children","type","name","accept","onChange","style","display","margin"],"sources":["/Users/alexander/Desktop/translation_memory/src/Elements/TranslationMemory/NewGame/DocumentUploader.tsx"],"sourcesContent":["import Papa from \"papaparse\";\nimport React, { useContext } from \"react\";\nimport Phrase from \"../../../Models/Phrase\";\nimport { translationMemoryContext } from \"../TranslationMemory\";\n\n\nconst DocumentUploader = () => {\n\n  const translationMemoryStore = useContext(translationMemoryContext);\n  const setPhrases = translationMemoryStore?.setPhrases;\n\n  const changeHandler = (event: any) => {\n    console.log(event.target.files[0]);\n    parseCsv(event);\n  };\n\n  const parseCsv = (event: any) => {\n    // Passing file data (event.target.files[0]) to parse using Papa.parse\n    Papa.parse(event.target.files[0], {\n      header: true,\n      skipEmptyLines: true,\n      complete: function (results: { data: any; }) {\n        const allPhrases: Phrase[] = results.data;\n        let filteredPhrases: Phrase[] = [];\n        // filter allPhrases based on the 'included' field in the CSV; exclude if it says FALSE\n        for(let phrase of allPhrases){\n          if(phrase.included as string !== 'FALSE'){\n            filteredPhrases.push(phrase);\n          }\n        }\n        console.log(filteredPhrases);\n        setPhrases? setPhrases(filteredPhrases): console.error('Unable to initialize uploaded phrases');\n      },\n    });\n  }\n\n\n  return (\n    <>\n    <div>\n    <input\n          type=\"file\"\n          name=\"file\"\n          accept=\".csv\"\n          onChange={changeHandler}\n          style={{ display: \"block\", margin: \"10px auto\" }}\n        />\n    </div>\n    </>\n  )\n}\n\nexport default DocumentUploader;"],"mappings":"yJAAA,MAAO,CAAAA,IAAI,KAAM,WAAW,CAC5B,MAAO,CAAAC,KAAK,EAAIC,UAAU,KAAQ,OAAO,CAEzC,OAASC,wBAAwB,KAAQ,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAGhE,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAE7B,GAAM,CAAAC,sBAAsB,CAAGP,UAAU,CAACC,wBAAwB,CAAC,CACnE,GAAM,CAAAO,UAAU,CAAGD,sBAAsB,SAAtBA,sBAAsB,iBAAtBA,sBAAsB,CAAEC,UAAU,CAErD,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAU,CAAK,CACpCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAClCC,QAAQ,CAACL,KAAK,CAAC,CACjB,CAAC,CAED,GAAM,CAAAK,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIL,KAAU,CAAK,CAC/B;AACAZ,IAAI,CAACkB,KAAK,CAACN,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAE,CAChCG,MAAM,CAAE,IAAI,CACZC,cAAc,CAAE,IAAI,CACpBC,QAAQ,CAAE,SAAAA,SAAUC,OAAuB,CAAE,CAC3C,GAAM,CAAAC,UAAoB,CAAGD,OAAO,CAACE,IAAI,CACzC,GAAI,CAAAC,eAAyB,CAAG,EAAE,CAClC;AAAA,IAAAC,SAAA,CAAAC,0BAAA,CACkBJ,UAAU,EAAAK,KAAA,KAA5B,IAAAF,SAAA,CAAAG,CAAA,KAAAD,KAAA,CAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,EAA6B,IAArB,CAAAC,MAAM,CAAAJ,KAAA,CAAAK,KAAA,CACZ,GAAGD,MAAM,CAACE,QAAQ,GAAe,OAAO,CAAC,CACvCT,eAAe,CAACU,IAAI,CAACH,MAAM,CAAC,CAC9B,CACF,CAAC,OAAAI,GAAA,EAAAV,SAAA,CAAAW,CAAA,CAAAD,GAAA,WAAAV,SAAA,CAAAY,CAAA,IACDzB,OAAO,CAACC,GAAG,CAACW,eAAe,CAAC,CAC5Bf,UAAU,CAAEA,UAAU,CAACe,eAAe,CAAC,CAAEZ,OAAO,CAAC0B,KAAK,CAAC,uCAAuC,CAAC,CACjG,CACF,CAAC,CAAC,CACJ,CAAC,CAGD,mBACElC,IAAA,CAAAE,SAAA,EAAAiC,QAAA,cACAnC,IAAA,QAAAmC,QAAA,cACAnC,IAAA,UACMoC,IAAI,CAAC,MAAM,CACXC,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,MAAM,CACbC,QAAQ,CAAEjC,aAAc,CACxBkC,KAAK,CAAE,CAAEC,OAAO,CAAE,OAAO,CAAEC,MAAM,CAAE,WAAY,CAAE,EACjD,EACA,EACH,CAEP,CAAC,CAED,cAAe,CAAAvC,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}